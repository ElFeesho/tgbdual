language: cpp

compiler:
  - clang

addons:
  apt:
    sources:
    - kalakris-cmake
    - ubuntu-toolchain-r-test
    - george-edison55-precise-backports
    packages:
    - cmake
    - cmake-data
    - libsdl1.2-dev
    - libsdl-image1.2-dev
    - libsdl-gfx1.2-dev
    - liblua5.2-dev

env:
  global:
    - LLVM_VERSION=3.6.2
    - LLVM_ARCHIVE_PATH=$HOME/clang+llvm.tar.xz

before_install:
  - if [ $TRAVIS_OS_NAME == linux ]; then wget http://llvm.org/releases/$LLVM_VERSION/clang+llvm-$LLVM_VERSION-x86_64-linux-gnu-ubuntu-14.04.tar.xz -O $LLVM_ARCHIVE_PATH; mkdir $HOME/clang+llvm; tar xf $LLVM_ARCHIVE_PATH -C $HOME/clang+llvm --strip-components 1; export PATH=$HOME/clang+llvm/bin:$PATH; fi
  - echo $LANG
  - echo $LC_ALL
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo apt-get update; fi
  - if [ $TRAVIS_OS_NAME == osx ]; then brew update && brew install sdl sdl_image sdl_gfx lua; fi

script: 
  - git submodule update
  - cd extlibs/wren
  - make
  - cd ../..
  - mkdir build
  - cd build
  - cmake ..
  - make

after_success:
  - echo Success

branches:
  only:
    - master

notifications:
  email: false

os:
  - linux
  - osx
